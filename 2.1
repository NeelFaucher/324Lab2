.equ LOAD_ADDRESS, 0xFFFEC600
.equ CONTROL_ADDRESS, 0xFFFEC608
.equ INTERRUPT_STATUS, 0xFFFEC60C

PUSH {LR}
MOV R0, #4000
@ BL ARM_TIM_read_INT_ASM
BL ARM_TIM_clear_INT_ASM
POP {LR}
B END

ARM_TIM_config_ASM:
PUSH {R2, R3, R4}
LDR R2, =LOAD_ADDRESS
LDR R3, =CONTROL_ADDRESS

STR R0, [R2]
MOV R4, #0b0000011
STRB R4, [R3]
POP {R2, R3, R4}
BX LR

ARM_TIM_read_INT_ASM:
PUSH {R2, R3}
LDR R2, =INTERRUPT_STATUS
LDR R0, [R2]
POP {R2, R3}
BX LR

ARM_TIM_clear_INT_ASM:
PUSH {R2, R3}
LDR R2, =INTERRUPT_STATUS
MOV R3, #0x00000001
LDR R3, [R2]

POP {R2, R3}
BX LR

HEX_write_ASM:
	PUSH {R2, R3}
	LDR R3, =HEX_03
	LDR R2, =ARRAY
	LDR R2, [R2, R1, LSL#2]
	
	CMP R0, #1
	STREQB R2, [R3]
	
	CMP R0, #2
	STREQB R2, [R3, #1]
	
	CMP R0, #4
	STREQB R2, [R3, #2]
	
	CMP R0, #8
	STREQB R2, [R3, #3]
	
	POP {R2, R3}
	BX LR

END:
	B END
